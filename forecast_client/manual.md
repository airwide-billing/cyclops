# Client CLI manual

In lieu of a traditional manpage or documentation, this is a compilation of the auto generated help messages
 with short explanations.

At the top level are the 3 main sub-commands.
```

usage: client.py [-h] {rule,cleanup,forecast} ...

positional arguments:
  {rule,cleanup,forecast}
                        Available commands
    rule                Rule management
    cleanup             Clean up the database
    forecast            Generate forecast

optional arguments:
  -h, --help            show this help message and exit
  
```
## Forecasting
#### Usage
Under the forecast command are the 3 types of forecast that can be generated.
```
usage: client.py forecast [-h] {single,global,pattern} ...

positional arguments:
  {single,global,pattern}
                        Available forecasts
    single              Forecast for single account
    global              Global forecast
    pattern             Pattern based global forecast

optional arguments:
  -h, --help            show this help message and exit
```

The single forecast will generate a forecast for a single account using the specified pricing model.
Keep in mind that this will not verify whether the rules applied by the user comply with the guidelines
outlined in the README. The default forecast length is 30 days.
```
usage: client.py forecast single [-h] --account ACCOUNT --model MODEL
                                 [--length LENGTH]

optional arguments:
  -h, --help         show this help message and exit
  --account ACCOUNT  Target account
  --model MODEL      Pricing model to be used
  --length LENGTH    Number of days to forecast
 ```
 
 The global forecast will use the same forecasting algorithm but without specifying an account.
 ```
 usage: client.py forecast global [-h] --model MODEL [--length LENGTH]

optional arguments:
  -h, --help       show this help message and exit
  --model MODEL    Pricing model to be used
  --length LENGTH  Number of days to forecast
```
The pattern based forecast uses the same parameters as the global one. Refer to the README for more 
details on how this forecast is generated.
```
usage: client.py forecast pattern [-h] --model MODEL [--length LENGTH]

optional arguments:
  -h, --help       show this help message and exit
  --model MODEL    Pricing model to be used
  --length LENGTH  Number of days to forecast

```
#### Output
In all cases the forecast commands will output the cost/revenue forecast per account. The account field will
read 'global' if the global forecast is used.
## Rule management
#### Usage
The rule management command allows adding or deleting rules on either instance of the Coin rule engine.
Use the `--delete` flag to switch to delete mode. Note that when adding a rule the target needs to be a
**file path** but while deleting it needs to be the value of the rule's **name** field.
```
usage: client.py rule [-h] [--delete] --engine {cdr,bill} --target TARGET

optional arguments:
  -h, --help           show this help message and exit
  --delete             Delete rule
  --engine {cdr,bill}  The coin instance to use
  --target TARGET      Rule-file path to add, or name to delete

```
#### Output
 Adding a rule will output the status code of the request and the rule as text. Deleting will output
 the number of rules deleted (should be 1 unless there are duplicates)
## Database Cleanup
#### Usage
Database cleanup will delete all records (usages, UDRs, CDRs and Bills) generated by the `--target`
pricing model. By specifying the `--all` flag it will also delete all the rules that comprise the model.
```
usage: client.py cleanup [-h] --target TARGET [--all]

optional arguments:
  -h, --help       show this help message and exit
  --target TARGET  Pricing model to clean up
  --all            Delete the model's rules too

```
#### Output
The output will be the number or records deleted for each type.

